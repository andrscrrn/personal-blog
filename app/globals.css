@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* CSS variables for theming (HSL for Tailwind color usage) */
:root {
  --background: 0 0% 100%;
  --foreground: 224 71% 4%; /* slightly darker for better contrast on white */
  --muted: 210 40% 96.1%;
  --border: 214.3 31.8% 91.4%;
  --card: 0 0% 100%;
  --card-foreground: 224 71% 4%;
  --primary: 221.2 83.2% 40%; /* reduce lightness for WCAG contrast */
  --primary-foreground: 210 40% 98%;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --border: 217.2 32.6% 17.5%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --primary: 217.2 91.2% 60%;
  --primary-foreground: 222.2 47.4% 11.2%;
}

@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-muted: hsl(var(--muted));
  --color-border: hsl(var(--border));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

html {
  color-scheme: light dark;
}

body {
  @apply bg-background text-foreground antialiased;
}

/* prose tweaks */
.prose {
  @apply leading-relaxed prose-neutral dark:prose-invert;
  /* Ensure sufficient contrast in both themes using our design tokens */
  --tw-prose-body: hsl(var(--foreground));
  --tw-prose-headings: hsl(var(--foreground));
  --tw-prose-bold: hsl(var(--foreground));
  --tw-prose-links: hsl(var(--primary));
  --tw-prose-hr: hsl(var(--border));
  --tw-prose-quotes: hsl(var(--foreground));
  --tw-prose-counters: hsl(var(--foreground));
  --tw-prose-bullets: hsl(var(--foreground));
  --tw-prose-code: hsl(var(--foreground));
  --tw-prose-th-borders: hsl(var(--border));
  --tw-prose-td-borders: hsl(var(--border));
}

.prose h1,
.prose h2,
.prose h3 {
  @apply font-semibold tracking-tight;
}

/* Ensure headings are high-contrast in dark mode */
.prose h1 {
  @apply text-foreground;
}

.prose h2 {
  @apply mt-10 mb-4 text-2xl md:text-3xl;
}

.prose p {
  @apply my-5;
}

/* headings: don't underline the autolink wrapper; only show subtle hover */
.prose h1 a,
.prose h2 a,
.prose h3 a,
.prose h4 a,
.prose h5 a,
.prose h6 a {
  @apply no-underline text-inherit hover:text-primary;
}

.prose a {
  /* Use higher-contrast link color and keep underline for accessibility */
  @apply text-primary underline underline-offset-4 hover:no-underline;
}

/* style appended heading anchors (from rehype-autolink-headings) */
.prose .anchor {
  @apply no-underline text-muted hover:text-primary;
}

.prose pre {
  @apply rounded-lg border border-border p-4 bg-muted/40;
}

.prose code {
  @apply rounded px-1 py-0.5 bg-muted/60;
}

.prose img {
  @apply rounded-lg border border-border;
}
